(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),l=a.n(o),r=a(6),s=a(1),c=a(2),m=a(4),u=a(3),d=a(5);a(14),a(15);function g(){var e=window.localStorage.getItem("toDoListData");return null===e||0===e.length?e:JSON.parse(e)}function p(e){window.localStorage.setItem("toDoListData",JSON.stringify(e))}function h(e){null!==window.localStorage.getItem("id")&&null!==window.localStorage.getItem("toDoListData")&&0!==window.localStorage.getItem("toDoListData").length||(window.localStorage.setItem("id","1"),window.localStorage.setItem("toDoListData",new Array)),e.id=function(){var e=parseInt(window.localStorage.getItem("id"));return window.localStorage.setItem("id",""+(e+1)),e}();var t=g();return 0===t.length?t=[e]:t.push(e),p(t),t}function f(e,t){for(var a=0;a<t.length&&t[a].id!==e;a++);return a}function v(e){var t=g(),a=f(e,t);return t.splice(a,1),p(t),t}function E(e){var t=g(),a=f(e,t);return t[a].isDone=!t[a].isDone,p(t),t}function D(e){var t=g(),a=f(e.id,t);return e.title&&(t[a].title=e.title),e.description&&(t[a].description=e.description),e.deadline&&(t[a].deadline=e.deadline),e.priority&&(t[a].priority=e.priority),e.attachedImage&&(t[a].attachedImage=e.attachedImage),e.tags&&(t[a].tags=e.tags),p(t),t}function b(e){return e.sort((function(e,t){if("high"===e.priority)return-1;if("middle"===e.priority){if("high"===t.priority)return 1;if("middle"===t.priority)return 0;if("low"===t.priority)return-1}else if("low"===e.priority)return 1}))}function w(e){if(0!=e.length){var t=b(e.filter((function(e){return!0===e.isDone}))),a=b(e.filter((function(e){return!1===e.isDone}))).concat(t);return p(a),a}return null}function I(e,t){return 0!=t.length?t.filter((function(t){return t.title.toLowerCase().indexOf(e.toLowerCase())>-1||t.description.toLowerCase().indexOf(e.toLowerCase())>-1||t.priority.toLowerCase().indexOf(e.toLowerCase())>-1||t.deadline.toLowerCase().indexOf(e.toLowerCase())>-1})):null}function C(e){var t=new Date,a=g();return"today"===e?a.filter((function(e){return new Date(e.deadline).getMonth()-t.getMonth()===0&&new Date(e.deadline).getDate()-t.getDate()===0})):"tomorrow"===e?a.filter((function(e){return new Date(e.deadline).getDate()-t.getDate()==1&&new Date(e.deadline).getMonth()-t.getMonth()===0})):"week"===e?a.filter((function(e){return new Date(e.deadline).getDate()-t.getDate()>=0&&new Date(e.deadline).getDate()-t.getDate()<=7&&new Date(e.deadline).getMonth()-t.getMonth()==0})):"month"===e?a.filter((function(e){return new Date(e.deadline).getMonth()-t.getMonth()==0&&new Date(e.deadline).getDate()-t.getDate()>=0})):null}function k(e){for(var t=g(),a=e.filter((function(e){return!0===e.marked})),n=[],i=0;i<=a.length-1;i++)n.push(a[i].name);return 0!==n.length?t.filter((function(e){return e.tags.some((function(e){return console.log(e),-1!=n.indexOf(e.tag)}))})):(console.log("empty"),g())}function S(e){if(e){var t=e.split("-"),a=new Date;return t[0]<a.getFullYear()&&(t[0]=a.getFullYear()),t[0]+"-"+t[1]+"-"+t[2]}return e}function N(){var e=window.localStorage.getItem("AvailableTags");return null===e||0===e.length?e:JSON.parse(e)}function T(e){window.localStorage.setItem("AvailableTags",JSON.stringify(e))}function y(e){null!==window.localStorage.getItem("idForTags")&&null!==window.localStorage.getItem("AvailableTags")&&0!==window.localStorage.getItem("AvailableTags").length||(window.localStorage.setItem("idForTags","1"),window.localStorage.setItem("AvailableTags",new Array)),e.id=function(){var e=parseInt(window.localStorage.getItem("idForTags"));return window.localStorage.setItem("idForTags",""+(e+1)),e}();var t=N();return 0===t.length?t=[e]:t.push(e),T(t),t}var O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onTitleChange=function(e){a.setState({inputTitle:e.target.value})},a.onDescriptionChange=function(e){a.setState({inputDescription:e.target.value})},a.onPriorityChange=function(e){a.setState({inputPriority:e.target.value})},a.onDeadlineChange=function(e){a.setState({inputDeadline:e.target.value})},a.onDialogPreventFromClosingClicked=function(e){e.stopPropagation()},a.setAttachedImageState=function(e){if(function(e){return!(!e||!e.length)&&(!(e[0].size/1024>200)&&!!function(e){var t=e.split("."),a=t[t.length-1];return!!["apng","bmp","gif","ico","cur","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"].find((function(e){return e===a}))}(e[0].name))}(e))(t=e[0],new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(e){return a(e)}}))).then((function(e){a.setState({inputAttachedImage:e})}));var t},a.onAttachedImageChange=function(){a.setAttachedImageState(a.attachedImageRef.current.files)},a.onAttachedImageDragEnter=function(e){e.stopPropagation(),e.preventDefault()},a.onAttachedImageDragOver=function(e){e.stopPropagation(),e.preventDefault()},a.onAttachedImageDrop=function(e){a.setAttachedImageState(e.dataTransfer.files),e.stopPropagation(),e.preventDefault()},a.onTagAdd=function(e){var t=a.state.tag,n=e.target.selectedIndex;console.log(n);var i=e.target.value,o={};if("None"===i&&(i=[]),"Choose Tag"===i)return null;o.tag=i,o.id=n;for(var l=0;l<=t.length-1;l++)if(t[l].tag===o.tag)return null;t.push(o),a.setState({tag:t})},a.deleteTagFromModal=function(e){var t=e.target.nextElementSibling.textContent;console.log(e.target.nextElementSibling);var n=a.state.tag,i=n.indexOf(t);n.splice(i,1),a.setState({tags:n})},a.generateResultingItem=function(){return{id:a.props.item?a.props.item.id:-1,title:a.state.inputTitle,description:a.state.inputDescription,priority:a.state.inputPriority,deadline:S(a.state.inputDeadline),attachedImage:a.state.inputAttachedImage,tags:a.state.tag,isDone:!!a.props.item&&a.props.item.isDone}},a.onSubmit=function(e){e.preventDefault(),a.props.parent(a.generateResultingItem())},a.state={inputTitle:a.props.item?a.props.item.title:"",inputDescription:a.props.item?a.props.item.description:"",inputPriority:a.props.item?a.props.item.priority:"",inputDeadline:a.props.item?a.props.item.deadline:"",inputAttachedImage:a.props.item?a.props.item.attachedImage:"",tag:[]},a.callbackFromTagSelect=function(e){a.setState({tag:e})},a.attachedImageRef=i.a.createRef(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.item,n=t.close,o=(t.parent,t.availableTags,this.state),l=o.inputTitle,s=o.inputDescription,c=o.inputPriority,m=o.inputDeadline,u=o.inputAttachedImage,d=o.tag.map((function(t){return i.a.createElement("div",{key:t.id,className:"tag-on-modal"},i.a.createElement("img",{value:t.tag,onClick:e.deleteTagFromModal,src:"https://smileassistance.com/wp-content/themes/smile/img/close.png"}),i.a.createElement("p",null,t.tag))})),g=null;return this.props.availableTags&&(g=this.props.availableTags.map((function(e){return i.a.createElement("option",{id:e.id,key:e.id,className:"option",value:e.tag},e.name)}))),i.a.createElement("section",{className:"modal-window",onClick:n},i.a.createElement("div",{className:"modal-window-item",onClick:this.onDialogPreventFromClosingClicked},i.a.createElement("section",{className:"header"},i.a.createElement("div",{className:"modal-title"},a?"Edit item ".concat(a.id):"Add new item"),i.a.createElement("div",{className:"modal-close-icon",onClick:n},i.a.createElement("div",{className:"modal-close-icon-inner"}))),i.a.createElement("section",{className:"content"},i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("section",{className:"form-elements-block"},i.a.createElement("input",{onChange:this.onTitleChange,required:!0,type:"text",name:"title",placeholder:"Title *",value:l,pattern:"(?=.*[a-z])(?=.*[A-Z]).{2,20}",className:"input"}),i.a.createElement("input",{onChange:this.onDescriptionChange,type:"text",name:"description",placeholder:"Description",value:s,className:"input",maxLength:"250"}),i.a.createElement("select",{onChange:this.onPriorityChange,required:!0,name:"priority",value:c,className:"select"},i.a.createElement("option",{className:"option",value:""},"Priority *"),i.a.createElement("option",Object(r.a)({className:"option",value:"low"},"className","low"),"low"),i.a.createElement("option",Object(r.a)({className:"option",value:"middle"},"className","middle"),"middle"),i.a.createElement("option",Object(r.a)({className:"option",value:"high"},"className","high"),"high")),i.a.createElement("input",{onChange:this.onDeadlineChange,type:"date",name:"deadline",placeholder:" ",value:m,className:"input"}),i.a.createElement("select",{className:"select",onChange:this.onTagAdd},i.a.createElement("option",{key:"default",defaultValue:!0,className:"option",value:"Choose Tag"},"Choose Tag"),g),i.a.createElement("div",{className:"attach-image-block",name:"image-drop",onDragEnter:this.onAttachedImageDragEnter,onDragOver:this.onAttachedImageDragOver,onDrop:this.onAttachedImageDrop},i.a.createElement("input",{type:"file",name:"image-input",className:"attach-image",ref:this.attachedImageRef,accept:"image/*",onChange:this.onAttachedImageChange}),i.a.createElement("p",{className:"text"},"Attach image (200kb max)")),u?i.a.createElement("img",{src:u,className:"thumbnail",alt:"thumbnail"}):i.a.createElement("p",{className:"thumbnail-text"},"no file or invalid file")),i.a.createElement("section",{className:"buttons"},i.a.createElement("div",{className:"buttons-item"},i.a.createElement("input",{className:"input negative",type:"button",value:"Cancel",onClick:n}),i.a.createElement("input",{className:"input positive",type:"submit",value:a?"Edit item":"Add item"}))),i.a.createElement("div",{className:"choosen-tags"},d)))))}}]),t}(i.a.Component);O.defaultProps={};var A=O,j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.state={tagname:e.target.value}},a.onSubmit=function(){var e={};e.name=a.state.tagname,e.id=a.state.tagname,e.marked=!1;var t=N(),n=y(e);a.setState({allTags:t},(function(){a.props.parent(n)}))},a.state={tagname:"",allTags:null},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"tag-input-container"},i.a.createElement("input",{type:"text",placeholder:"tag..",onChange:this.handleChange}),i.a.createElement("input",{value:" Add tag",type:"submit",onClick:this.onSubmit}))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onDeleteItemClicked=function(){a.props.deleteItem(a.props.item.id)},a.onMarkItemClicked=function(){a.props.markItemAsTodoDone(a.props.item.id)},a.onEditItemClicked=function(){a.props.editItem(a.props.item)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.item,t=e.title,a=e.description,n=e.priority,o=e.deadline,l=e.isDone,r=e.tags,s=e.attachedImage,c=r.map((function(e){return i.a.createElement("div",{className:" tag-element ",id:e.id,key:e.id,value:e.tag},e.tag)}));return i.a.createElement("div",{className:"item"},i.a.createElement("p",{className:"title ".concat(l?"line-through":"")},t),i.a.createElement("p",{className:"text ".concat(l?"line-through":"")},a||"-"),i.a.createElement("p",{className:"text ".concat(l?"line-through":"")},"Priority:",i.a.createElement("span",{className:"priority-".concat(n)}," ".concat(n))),i.a.createElement("p",{className:"text ".concat(l?"line-through":"")},o||"-"),i.a.createElement("div",{className:"choosen-tags"},c),i.a.createElement("section",{className:"buttons"},i.a.createElement("input",{type:"button",className:"input negative",value:"Delete",onClick:this.onDeleteItemClicked}),i.a.createElement("input",{type:"button",className:"input positive",value:"Edit",onClick:this.onEditItemClicked}),i.a.createElement("input",{type:"button",className:"input positive",value:l?"Mark as ToDo":"Mark as Done",onClick:this.onMarkItemClicked}),s&&i.a.createElement("a",{href:s,download:!0,className:"input positive"},"Download")))}}]),t}(i.a.Component);x.defaultProps={};var L=x,F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={items:a.props.items},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=null;return t=void 0===this.props.items?i.a.createElement("p",null,"The list is undefined"):null===this.props.items||0===this.props.items.length?i.a.createElement("p",null,"The list is empty"):this.props.items.map((function(t,a){return i.a.createElement(L,{key:t.id.toString(),item:t,deleteItem:e.props.deleteItem,editItem:e.props.editItem,markItemAsTodoDone:e.props.markItemAsTodoDone,tags:e.props.tags,index:a,style:{margin:"10px"}})})),i.a.createElement("section",{className:"to-do-items-container"},i.a.createElement("section",{className:"grid"},t))}}]),t}(i.a.PureComponent),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).findindex=function(e,t){var a=e.findIndex((function(e){return e.id===t?a:null}))},a.deleteItem=function(e){a.setState({list:v(e),visualList:!1})},a.markItemAsTodoDone=function(e){a.setState({list:E(e),visualList:!1})},a.editItem=function(e){a.setState({dialog:!0,itemToEdit:e})},a.closeDialog=function(){a.setState({dialog:!1,itemToEdit:null})},a.callbackFromDialog=function(e){a.setState({dialog:!1,itemToEdit:null,visualList:!1}),-1===e.id?a.setState({list:h(e)}):a.setState({list:D(e)})},a.callbackFromTagInput=function(e){a.setState({availableTags:e})},a.onAddClicked=function(){a.setState({dialog:!0})},a.onSortClicked=function(){a.setState({visualList:w(a.state.list)})},a.onFilterChange=function(e){a.setState({byDateSelectFilter:e.target.value,visualList:C(e.target.value)})},a.onSearchChange=function(e){a.timeoutSearch(e.target.value,a.state.list)},a.timeoutSearch=function(e,t){setTimeout((function(){a.setState({visualList:I(e,t)})}),500)},a.onDeleteTagClicked=function(e,t){var n=function(e){var t=N(),a=f(e,t);return t.splice(a,1),T(t),t}(e),i=function(e){for(var t=g(),a=0;a<t.length;a++)for(var n=0;n<t[a].tags.length;n++)t[a].tags[n].tag==e&&t[a].tags.splice(n,1);return p(t),t}(t);a.setState({availableTags:n,list:i})},a.state={dialog:!1,visualList:!1,itemToEdit:null,list:g(),byDateSelectFilter:"",availableTags:N()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onTagMarked",value:function(e){var t=this.state.availableTags.findIndex((function(t){return t.id===e})),a=this.state.availableTags;a[t].marked=!a[t].marked,T(a),this.setState({availableTags:N(),visualList:k(a)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dialog,n=t.visualList,o=t.itemToEdit,l=t.list,s=t.availableTags,c=null;return c=null===s?i.a.createElement("p",null," No tags"):s.map((function(t){var a;return i.a.createElement("div",{key:t.id},i.a.createElement("div",{className:"delete-tag",onClick:function(){return e.onDeleteTagClicked(t.id,t.name)}},"X"),i.a.createElement("div",(a={className:"tag-on-modal",onClick:function(){return e.onTagMarked(t.id)}},Object(r.a)(a,"className","item positive tag-element ".concat(t.marked?"marked":" ")),Object(r.a)(a,"id",t.id),a),t.name))})),i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",{className:"control-panel"},i.a.createElement("li",null,i.a.createElement("button",{className:"item positive",onClick:this.onAddClicked},"Add Item")),i.a.createElement("li",null,i.a.createElement("button",{className:"item positive",onClick:this.onSortClicked},"Sort")),i.a.createElement("li",null,i.a.createElement("select",{className:"item positive",onChange:this.onFilterChange},i.a.createElement("option",{defaultValue:"select"},"Choose deadline"),i.a.createElement("option",{value:"today"},"Today"),i.a.createElement("option",{value:"tomorrow"},"Tomorrow"),i.a.createElement("option",{value:"week"},"Week"),i.a.createElement("option",{value:"month"},"During the month"))),i.a.createElement("li",null,i.a.createElement("input",{className:"item search",type:"text",name:"search",placeholder:"Search",onChange:this.onSearchChange}))),c&&i.a.createElement("div",{className:"tag-container"},c),a&&i.a.createElement(A,{close:this.closeDialog,parent:this.callbackFromDialog,item:o,availableTags:this.state.availableTags}),i.a.createElement(j,{parent:this.callbackFromTagInput}),i.a.createElement(F,{items:n||l,deleteItem:this.deleteItem,editItem:this.editItem,markItemAsTodoDone:this.markItemAsTodoDone,tags:s}))}}]),t}(i.a.Component);l.a.render(i.a.createElement(P,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.d8f784b4.chunk.js.map